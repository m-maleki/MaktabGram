@page
@model MaktabGram.Presentation.RazorPages.Pages.Account.SearchModel
@{
}

<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جستجوی کاربران | MaktabGram</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: #F5F5F5;
            color: #262626;
            padding-top: 60px;
        }

        .primary-button {
            background-image: linear-gradient(to right, #6B46C1 0%, #F687B3 100%);
            color: white;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(107, 70, 193, 0.3);
        }

            .primary-button:hover {
                opacity: 0.9;
                transform: translateY(-1px);
            }

        .secondary-button {
            background-color: #E5E7EB;
            color: #4B5563;
            border: 1px solid #D1D5DB;
            transition: all 0.2s ease;
        }

            .secondary-button:hover {
                background-color: #D1D5DB;
            }
    </style>
</head>
<body class="overflow-x-hidden">

    <!-- Header -->
    <header class="fixed top-0 right-0 w-full bg-white border-b border-gray-200 z-50 shadow-sm">
        <div class="max-w-5xl mx-auto px-4 h-14 flex items-center justify-between">
            <div class="text-2xl font-black text-gray-800 tracking-tight">MaktabGram</div>
            <nav class="flex items-center space-x-4 space-x-reverse">
                <a href="#" class="text-gray-800 hover:text-gray-900" title="خانه">
                    <span data-lucide="home" class="w-6 h-6"></span>
                </a>
                <a href="#" class="text-gray-800 hover:text-gray-900" title="پست جدید">
                    <span data-lucide="plus-square" class="w-6 h-6"></span>
                </a>
                <a href="#" class="text-gray-800 hover:text-gray-900" title="پروفایل">
                    <span data-lucide="user" class="w-6 h-6"></span>
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-3xl mx-auto p-4 mt-4">
        <!-- Search Box -->

        <form method="post" asp-action="Search" asp-controller="Account">
            <div class="bg-white shadow-md rounded-2xl p-3 mb-6 flex items-center space-x-2 space-x-reverse">
                <input name="username"
                       type="text"
                       placeholder="نام کاربری را وارد کنید..."
                       class="flex-1 bg-transparent outline-none text-sm text-gray-700 pr-2" />
                <button type="submit"
                        class="primary-button flex items-center justify-center px-3 py-2 rounded-xl text-white text-sm">
                    <span data-lucide="search" class="w-4 h-4 ml-1"></span> جستجو
                </button>
            </div>
        </form>

        <!-- Results List -->
        <section id="resultsList" class="space-y-3">

            @if (Model is null)
            {
                <p class="text-center text-gray-500">هیچ کاربری یافت نشد.</p>
            }
            else
            {
                @foreach (var user in Model.SearchResult)
                {
                    <input type="hidden" value="@user.UserId"></input>
                    <div class="bg-white rounded-xl shadow-sm p-4 flex items-center justify-between hover:shadow-md transition">
                        <div class="flex items-center space-x-3 space-x-reverse">
                            @if(user.ImgProfileUrl is not null)
                            {
                                <img src="/@user.ImgProfileUrl" alt="آواتار" class="w-12 h-12 rounded-full border border-gray-300 object-cover user-avatar">
                            }
                            else
                            {
                                <img src="/images/default-avatar.png" class="w-12 h-12 rounded-full border border-gray-300 object-cover user-avatar">

                            }
                            <div>
                                <a class="font-semibold text-gray-800 username" asp-page="Profile" asp-route-userId="@user.UserId">@user.UserName</a>
                            </div>
                        </div>

                        @if (user.IsFollowed)
                        {
                            <a asp-page-handler="UnFollow" asp-route-id="@user.UserId" class="primary-button text-sm font-semibold py-1.5 px-4 rounded-lg follow-btn">
                                UnFollow
                            </a>
                        }
                        else
                        {
                            <a asp-page-handler="Follow" asp-route-id="@user.UserId" class="primary-button text-sm font-semibold py-1.5 px-4 rounded-lg follow-btn">
                                Follow
                            </a>
                        }

                    </div>
                }
            }

        </section>
    </main>
</body>
</html>

